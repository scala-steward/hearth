package hearth
package typed

import hearth.data.Data

/** Macro implementation is in [[MethodsFixturesImpl]] */
final class MethodsSpec extends MacroSuite {

  group("trait typed.Methods") {

    group("methods: Method.methodsOf[A], returns preprocessed methods") {
      import MethodsFixtures.testMethodsExtraction

      test("for class without companion") {
        val envDependedPosition =
          if (LanguageVersion.byHearth.isScala2_13) Data("None")
          else Data("Some(hearth-tests/src/main/scala/hearth/examples/methods.scala)")

        testMethodsExtraction[examples.methods.NoCompanionClass](
          "clone",
          "equals",
          "finalize",
          "getClass",
          "hashCode",
          "notify",
          "notifyAll",
          "toString",
          "wait",
          "asInstanceOf",
          "isInstanceOf",
          "synchronized",
          "==",
          "!=",
          "eq",
          "ne",
          "##"
        ) <==> Data.map(
          "method(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          ),
          "methodWithDefault(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          ),
          "methodWithAnnotation(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(Data("new hearth.examples.methods.ExampleAnnotation()")),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          ),
          "methodWithAnnotatedParam(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          ),
          "scalaValue" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(true),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(false),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(0),
            "isNullary" -> Data(true),
            "isUnary" -> Data(false),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(true),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(true),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(true)
          ),
          "scalaVariable" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(true),
            "isLazy" -> Data(false),
            "isDef" -> Data(false),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(0),
            "isNullary" -> Data(true),
            "isUnary" -> Data(false),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(true),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(true),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(true)
          ),
          "scalaVariable_=(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(true),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(true),
            "isScalaAccessor" -> Data(true),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(true)
          ),
          "inheritedAbstractMethod(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(true),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(false),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          ),
          "inheritedFinalMethod(Int)" -> Data.map(
            "invocation" -> Data("OnInstance"),
            "hasTypeParameters" -> Data(false),
            "position" -> envDependedPosition,
            "annotations" -> Data.list(),
            "isConstructor" -> Data(false),
            "isVal" -> Data(false),
            "isVar" -> Data(false),
            "isLazy" -> Data(false),
            "isDef" -> Data(true),
            "isImplicit" -> Data(false),
            "isDeclared" -> Data(false),
            "isSynthetic" -> Data(false),
            "isInherited" -> Data(true),
            "isAvailable(Everywhere)" -> Data(true),
            "arity" -> Data(1),
            "isNullary" -> Data(false),
            "isUnary" -> Data(true),
            "isBinary" -> Data(false),
            "isConstructorArgument" -> Data(false),
            "isCaseField" -> Data(false),
            "isScalaGetter" -> Data(false),
            "isScalaSetter" -> Data(false),
            "isScalaAccessor" -> Data(false),
            "isJavaGetter" -> Data(false),
            "isJavaSetter" -> Data(false),
            "isJavaAccessor" -> Data(false),
            "isAccessor" -> Data(false)
          )
        )
      }

      // TODO: class with companion

      // TODO: module
    }

    // TODO: attempt calling methods

    // TODO: attempt calling methods with default values
  }
}
